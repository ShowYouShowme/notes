dataproxy：redis缓存代理

dbagent：MySQL数据库代理





vscode项目配置：

```
{
    "configurations": [
        {
            "name": "Win32",
            "includePath": [
                "${workspaceFolder}/**",
                "C:\\\\usr\\\\include",
                "C:\\\\usr\\\\include\\\\x86_64-linux-gnu",
                "..\\comm",
                "../../include/",
                "../../include/rpc",
                "../../include/wbl-0.7"
            ],
            "defines": [
                "_DEBUG",
                "UNICODE",
                "_UNICODE",
                "__x86_64__",
                "__LP64__"
            ],
            "windowsSdkVersion": "10.0.14393.0",
            "compilerPath": "C:/MinGW/bin/g++.exe",
            "cStandard": "c11",
            "cppStandard": "c++17",
            "intelliSenseMode": "gcc-x64"
        }
    ],
    "version": 4
}
```





# 添加数据库

1. 在`util/ServiceDefine.h`里面添加字段

2. 修改`dataproxyserver/config/relative.conf`

   21. 在redis_struct标签里面添加Item

       ```xml
       <40>
       data_type = 1
       section_factor = 1
       ttl = 0
       table = tb_friend
       relative = 0
       key_field = uid
       key_field_type = 0
       join_fields =
       join_fields_type = 
       </40>
       ```

   22. 在tables标签里面添加Item

       ```xml
       <tb_friend>
           data_type = 1
           section_factor = 1
           cols = uid|friend_uid|relationship,
       </tb_friend>
       ```

3. 修改`dbagentserver/config/DB.conf`

   31. 在table标签里面添加Item

       ```xml
       <tb_friend>
           data_type = 1
           section_factor = 1
           db_name = hp_friend
           table_num = 1			
       </tb_friend>
       ```

   32. 在database标签里面添加Item

       ```xml
       <hp_friend>
           db_group = db_hp_friend
       </hp_friend>
       ```

   33. 在cluster里面添加Item

       ```
       db_hp_friend = db_hp_friend_1
       ```

   34. 在db_group里面添加Item

       ```xml
       <db_hp_friend_1>
           master_host = 192.168.0.250
           slave_host = 192.168.0.250
           port = 3306
           user = tars
           password = tars2015
           charset = utf8
           dbname = hp_friend
       </db_hp_friend_1>
       ```

       

   