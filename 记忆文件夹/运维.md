# 第一章  部署架构

```ini
;架构一
[负载均衡]
desc = 使用DNS负载均衡

[反向代理]
desc = 外层部署多台nginx反向代理(TCP4层或者ws反向代理等),方便日后带宽扩容

[上游服务]
desc = 全部的上游服务在反向代理后,没有公网IP(没有公网IP会更加安全),和nginx在一个局域网内


;架构二
[单节点部署全部服务]
method-1 = nginx部署在宿主机,上游服务和DB 部署在docker里面,绑定宿主机的127.0.0.1的网卡的端口 [推荐]

method-2 = nginx部署在宿主机,上游服务和DB 部署在宿主机里,但是绑定127.0.0.1的网卡的端口,防火墙只需要对外暴露反向代理的端口
```



# 第二章  常见工作



## 2.1 创建非登录用户

```ini
 [创建]
 cmd = sudo useradd -s /sbin/nologin li
 
 [切换到非登录用户]
 cmd =  sudo su -s /bin/bash li
```



## 2.2 用非登录用户运行服务





## 2.3 内核参数配置

1. 调整进程最大打开文件数

   ```ini
   [查看]
   cmd = ulimit -a
   
   [调整]
   
   ```

   



## 2.4 反向代理配置





## 2.5 静态资源服务器配置



## 2.6 php-fpm配置





## 2.7 Mysql配置



## 2.8 Mongodb配置



## 2.9 防火墙配置





## 2.10 监控配置

